<!DOCTYPE html>  
<html lang="en">    
<head>    
<meta charset="UTF-8">    
<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<title>Customs Payment Form</title>    
<style>    
  html, body {    
    margin: 0;    
    padding: 0;    
    height: 100%;    
    font-family: 'Segoe UI', Arial, sans-serif;    
    overflow: hidden;    
  }  
  /* Fullscreen background video */  
#bg-video {  
  position: fixed;  
  top: 0;  
  left: 0;  
  width: 100%;  
  height: 100%;  
  object-fit: cover;  
  z-index: -2;  
  filter: brightness(0.7);  
}  

/* Light semi-transparent overlay */   /* <-- fixed malformed comment here */
#overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(135, 206, 235, 0.2); /* sky blue tint */
  z-index: -1;
}

/* Floating form panel */
.form-panel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.85);
  border-radius: 12px;
  padding: 1rem 1.5rem;
  width: 280px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.25);
}

h1 {
  font-weight: 900;
  font-size: 1.4rem;
  color: #0033a0;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.payment-info p {
  margin: 0.3rem 0;
  font-size: 0.85rem;
  color: #000;
}

label {
  display: block;
  margin: 0.4rem 0 0.2rem;
  font-weight: 600;
  font-size: 0.85rem;
}

input {
  width: 100%;
  padding: 0.6rem;
  margin-bottom: 0.6rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 0.85rem;
}

button {
  width: 100%;
  background: #0033a0;
  color: #fff;
  padding: 0.7rem;
  font-size: 0.9rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #002070;
}

.note {
  font-size: 0.75rem;
  color: #555;
  margin-top: 0.6rem;
}

/* ---- ADDITION: Spinner overlay + iPhone popup CSS (only added) ---- */
#simOverlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  background: rgba(255,255,255,0.95);
  flex-direction: column;
}
.sim-spinner {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  border: 8px solid rgba(0,0,0,0.06);
  border-top: 8px solid #0033a0;
  animation: spin 1s linear infinite;
  margin-bottom: 14px;
}
@keyframes spin { to { transform: rotate(360deg); } }
#simMessage { color: #07214a; font-weight:700; margin-bottom:6px; text-align:center; }
#simSub { color: #6b7280; font-size:13px; text-align:center; }

/* iPhone-style popup (added) */
.iphone-popup {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 10000;
  width: 320px;
  max-width: 92%;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.25);
  display: none;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
}
.iphone-top { padding: 12px 16px; border-bottom: 1px solid #eee; text-align:center; font-weight:700; color:#07214a; }
.iphone-body { padding: 18px; color: #333; font-size:15px; text-align:center; }
.iphone-actions { display:flex; gap:8px; padding:12px; justify-content:center; border-top:1px solid #f3f3f3; }
.iphone-actions button { flex:1; padding:10px 12px; border-radius:10px; border:0; font-weight:700; cursor:pointer; }
.btn-secondary { background:#f3f4f6; color:#07214a; }
.btn-primary { background:#0033a0; color:white; }

</style>
</head>    
<body>    

  <!-- With this GIF image -->  
  <img src="https://magnetic-ag.com/wp-content/uploads/2021/08/container.gif"     
  id="bg-video"     
  alt="Customs Port"     
  style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2;">    

  <div id="overlay"></div>    

  <!-- Floating form -->    
  <div class="form-panel">    
    <h1>✈ Customs Payment</h1>  
    <div class="payment-info">    
      <p><strong>Form:</strong> Customs Declaration Form</p>    
      <p><strong>Amount Due:</strong> $<span id="random-amount"></span></p>    
      <p><strong>Reference Number:</strong> <span id="ref-number"></span></p>    
    </div>    

    <form id="payment-form">    
      <label for="card-name">Cardholder Name</label>    
      <input type="text" id="card-name" placeholder="John Doe" required>    

      <label for="card-number">Card Number</label>
      <input type="text" id="card-number" placeholder="4242 4242 4242 4242" required>

      <label for="expiry">Expiry Date</label>
      <input type="text" id="expiry" placeholder="MM/YY" required>

      <label for="cvc">CVC</label>
      <input type="text" id="cvc" placeholder="123" required>

      <button type="submit">Submit Payment</button>

    </form>    
    <p class="note">Your official form will be sent to jasdhillon87@hotmail.com after prompt payment</p>    
  </div>  

  <!-- ---- ADDITION: Spinner overlay HTML (only added) ---- -->
  <div id="simOverlay" aria-hidden="true">
    <div class="sim-spinner" aria-hidden="true"></div>
    <div id="simMessage">Connecting to American Express...</div>
    <div id="simSub"></div>
  </div>

  <!-- ---- ADDITION: iPhone-style popup HTML (only added) ---- -->
  <div class="iphone-popup" id="iphonePopup" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="iphone-top">Payment Successful</div>
    <div class="iphone-body" id="iphoneBody">
      Payment failed due to insufficient balance on the card.<br><br>
      Top up your card and try again.
    </div>
    <div class="iphone-actions">
      <button class="btn-secondary" id="popupClose">Close</button>
      <button class="btn-primary" id="popupTopUp">Top up card</button>
    </div>
  </div>

<script>    
  // Random amount and reference number    
  const amount = (Math.random() * 1000 + 100).toFixed(2);    
  document.getElementById("random-amount").textContent = amount;    
    
  const ref = 'CBP' + Math.floor(Math.random() * 1000000);    
  document.getElementById("ref-number").textContent = ref;    
    
  // Prevent actual form submission (original behavior left unchanged)    
  document.getElementById("payment-form").addEventListener("submit", function(e){    
    e.preventDefault();
    // ---- ADDED: Spinner -> messages -> iPhone popup sequence (only added) ----
    const simOverlay = document.getElementById('simOverlay');
    const simMessage = document.getElementById('simMessage');
    const simSub = document.getElementById('simSub');
    const iphonePopup = document.getElementById('iphonePopup');
    const iphoneBody = document.getElementById('iphoneBody');

    function maskCard(num){
      const clean = (num||'').replace(/\s+/g,'');
      if(clean.length < 4) return '**** **** **** 0005';
      return '**** **** **** ' + clean.slice(-4);
    }

    // read whatever the user typed (no storage, no network)
    const cardNum = (document.getElementById('card-number') && document.getElementById('card-number').value) || '';
    const masked = maskCard(cardNum);

    // show spinner overlay + initial message
    simMessage.textContent = 'Processing payment...';
    simSub.textContent = '';
    simOverlay.style.display = 'flex';
    simOverlay.setAttribute('aria-hidden','false');

    // after ~1.1s update to "Custom payment completed" and show generation subtext
    setTimeout(function(){
      simMessage.textContent = 'Custom payment completed';
      simSub.textContent = 'Generating official document...';
    }, 1100);

    // after ~2.6s update to "Finalizing..." (keep spinner)
    setTimeout(function(){
      simMessage.textContent = 'Finalizing...';
      simSub.textContent = 'Preparing your CBP document';
    }, 2600);

    // after ~3.6s hide overlay and show iPhone popup with the requested document + CBP number
    setTimeout(function(){
      simOverlay.style.display = 'none';
      simOverlay.setAttribute('aria-hidden','true');

      // show the provided document image and the CBP Custom number 47859963210
      iphoneBody.innerHTML = ''
        + '<div style="text-align:center;">'
        + '<img src="https://i.imgur.com/CEgn9KO_d.webp?maxwidth=760&fidelity=grand" alt="CBP Document" style="width:100%; max-height:320px; object-fit:contain; border-radius:8px; margin-bottom:12px;">'
        + '<p style="margin:0 0 8px 0; font-weight:700;">CBP Custom number: <span style="font-size:16px;">47859963210</span></p>'
        + '<p style="margin:6px 0 0 0; font-size:13px; color:#6b7280;">Your official form has been generated and will also be emailed to jasdhillon87@hotmail.com</p>'
        + '</div>';

      iphonePopup.style.display = 'block';
      iphonePopup.setAttribute('aria-hidden','false');
    }, 3600);
  });  

  // popup actions (only added)
  document.getElementById('popupClose').addEventListener('click', function(){
    document.getElementById('iphonePopup').style.display = 'none';
    document.getElementById('iphonePopup').setAttribute('aria-hidden','true');
  });
  document.getElementById('popupTopUp').addEventListener('click', function(){
    alert('Top-up flow simulated — would redirect to issuer in production.');
    document.getElementById('iphonePopup').style.display = 'none';
    document.getElementById('iphonePopup').setAttribute('aria-hidden','true');
  });

</script>  
</body>  
</html>
